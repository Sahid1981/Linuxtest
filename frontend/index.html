
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Containerized LEMP Example</title>
</head>
<body>
  <h1>Frontend (Nginx)</h1>

  <h2>Health</h2>
  <div id="health">Loading...</div>

  <h2>Time</h2>
  <div id="time">Loading...</div>
          <div class="section">
            <h3>Päiväkirja</h3>
            <button class="diary-button" onclick="openNewEntry()">Uusi päiväkirja merkintä</button>
            <button class="diary-button" onclick="viewEntries()">Katso päiväkirja merkintöjä</button>
        </div>

  <script>
    async function load() {
      try {
        // 1) Health
        const hr = await fetch('/cicd/api/health');
        if (!hr.ok) throw new Error('Health HTTP ' + hr.status);
        const hd = await hr.json();

        // Koska palautat message: {status: "ok"}
        document.getElementById('health').innerText =
          'status: ' + (hd.message?.status ?? JSON.stringify(hd));

        // 2) Time
        const tr = await fetch('/cicd/api/time');
        if (!tr.ok) throw new Error('Time HTTP ' + tr.status);
        const td = await tr.json();

        // Koska palautat message: {time: "..."}
        document.getElementById('time').innerText =
          'time: ' + (td.message?.time ?? JSON.stringify(td));

      } catch (e) {
        document.getElementById('health').innerText = 'API error: ' + e;
        document.getElementById('time').innerText = 'API error: ' + e;
      }
    }
            function openNewEntry() {
            window.location.href = 'diary.html';
        }

        function viewEntries() {
            window.location.href = 'view-diary.html';
        }
    load();
  </script>
</body>
</html>
